---
import SiteLayout from "./SiteLayout.astro";
import Share from "astro-heroicons/solid/Share.astro";
const { frontmatter } = Astro.props;
const url = Astro.request.url;
---

<SiteLayout title={frontmatter.title}>
  <article class="prose dark:prose-invert mt-20">
    <div class="flex justify-between">
      <h1>{frontmatter.title}</h1>
      <button
        class="w-9 h-9"
        id="shareButton"
        data-url={url}
        data-title={frontmatter.title}
      >
        <Share class="w-9 h-9" />
      </button>
    </div>
    <img
      src={frontmatter.img}
      alt="Kendrick Lamar “Mr. Morale & the Big Steppers”"
      width={700}
      height={700}
    />
    <slot />
  </article>
</SiteLayout>

<script>
  const shareButton = document.getElementById("shareButton");
  const url = shareButton.getAttribute("data-url");
  const title = shareButton.getAttribute("data-title");
  shareButton.addEventListener("click", () => {
    if (navigator.share) {
      navigator
        .share({
          title: title,
          url: url,
        })
        .catch(console.error);
    } else {
      console.log("Web Share API is not supported in your browser.");
      navigator.clipboard.writeText(url);
    }
  });
</script>
